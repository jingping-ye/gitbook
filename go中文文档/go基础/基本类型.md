# 基本类型

## 1. 基本类型 <a id="&#x57FA;&#x672C;&#x7C7B;&#x578B;"></a>

### 1.1. 基本类型介绍 <a id="&#x57FA;&#x672C;&#x7C7B;&#x578B;&#x4ECB;&#x7ECD;"></a>

Golang 更明确的数字类型命名，支持 Unicode，支持常用数据结构。

| 类型          | 长度\(字节\) | 默认值 | 说明                                           |
| :------------ | :----------- | :----- | :--------------------------------------------- |
| bool          | 1            | false  |                                                |
| byte          | 1            | 0      | uint8                                          |
| rune          | 4            | 0      | Unicode Code Point, int32                      |
| int, uint     | 4 或 8       | 0      | 32 或 64 位                                    |
| int8, uint8   | 1            | 0      | -128 ~ 127, 0 ~ 255，byte 是 uint8 的别名      |
| int16, uint16 | 2            | 0      | -32768 ~ 32767, 0 ~ 65535                      |
| int32, uint32 | 4            | 0      | -21 亿~ 21 亿, 0 ~ 42 亿，rune 是 int32 的别名 |
| int64, uint64 | 8            | 0      |                                                |
| float32       | 4            | 0.0    |                                                |
| float64       | 8            | 0.0    |                                                |
| complex64     | 8            |        |                                                |
| complex128    | 16           |        |                                                |
| uintptr       | 4 或 8       |        | 以存储指针的 uint32 或 uint64 整数             |
| array         |              |        | 值类型                                         |
| struct        |              |        | 值类型                                         |
| string        |              | ""     | UTF-8 字符串                                   |
| slice         |              | nil    | 引用类型                                       |
| map           |              | nil    | 引用类型                                       |
| channel       |              | nil    | 引用类型                                       |
| interface     |              | nil    | 接口                                           |
| function      |              | nil    | 函数                                           |

支持八进制、 六进制，以及科学记数法。标准库 math 定义了各数字类型取值范围。

```text
     a, b, c, d := 071, 0x1F, 1e9, math.MinInt16
```

空指针值 nil，而非 C/C++ NULL。

#### 1.1.1. 整型 <a id="&#x6574;&#x578B;"></a>

整型分为以下两个大类： 按长度分为：`int8`、`int16`、`int32`、`int64`对应的无符号整型：`uint8`、`uint16`、`uint32`、`uint64`

其中，`uint8`就是我们熟知的`byte`型，`int16`对应 C 语言中的`short`型，`int64`对应 C 语言中的`long`型。

#### 1.1.2. 浮点型 <a id="&#x6D6E;&#x70B9;&#x578B;"></a>

Go 语言支持两种浮点型数：`float32`和`float64`。这两种浮点型数据格式遵循`IEEE 754`标准： `float32` 的浮点数的最大范围约为`3.4e38`，可以使用常量定义：`math.MaxFloat32`。 `float64` 的浮点数的最大范围约为 `1.8e308`，可以使用一个常量定义：`math.MaxFloat64`。

#### 1.1.3. 复数 <a id="&#x590D;&#x6570;"></a>

`complex64`和`complex128`

复数有实部和虚部，`complex64`的实部和虚部为 32 位，`complex128`的实部和虚部为 64 位。

#### 1.1.4. 布尔值 <a id="&#x5E03;&#x5C14;&#x503C;"></a>

Go 语言中以`bool`类型进行声明布尔型数据，布尔型数据只有`true（真）`和`false（假）`两个值。

```text
    注意：

    布尔类型变量的默认值为false。

    Go 语言中不允许将整型强制转换为布尔型.

    布尔型无法参与数值运算，也无法与其他类型进行转换。
```

#### 1.1.5. 字符串 <a id="&#x5B57;&#x7B26;&#x4E32;"></a>

Go 语言中的字符串以原生数据类型出现，使用字符串就像使用其他原生数据类型`（int、bool、float32、float64 等）`一样。 Go 语言里的字符串的内部实现使用 UTF-8 编码。 字符串的值为双引号\("\)中的内容，可以在 Go 语言的源码中直接添加非`ASCII`码字符，例如：

```text
s1 := "hello"
s2 := "你好"
```

#### 1.1.6. 字符串转义符 <a id="&#x5B57;&#x7B26;&#x4E32;&#x8F6C;&#x4E49;&#x7B26;"></a>

Go 语言的字符串常见转义符包含回车、换行、单双引号、制表符等，如下表所示。

| 转义 | 含义                               |
| :--- | :--------------------------------- |
| \r   | 回车符（返回行首）                 |
| \n   | 换行符（直接跳到下一行的同列位置） |
| \t   | 制表符                             |
| \'   | 单引号                             |
| \"   | 双引号                             |
| \    | 反斜杠                             |

举个例子，我们要打印一个 Windows 平台下的一个文件路径：

```text
package main
import (
    "fmt"
)
func main() {
    fmt.Println("str := \"c:\\pprof\\main.exe\"")
}
```

#### 1.1.7. 多行字符串 <a id="&#x591A;&#x884C;&#x5B57;&#x7B26;&#x4E32;"></a>

Go 语言中要定义一个多行字符串时，就必须使用`反引号`字符：

```text
    s1 := `第一行
    第二行
    第三行
    `
    fmt.Println(s1)
```

反引号间换行将被作为字符串中的换行，但是所有的转义字符均无效，文本将会原样输出。

#### 1.1.8. 字符串的常用操作 <a id="&#x5B57;&#x7B26;&#x4E32;&#x7684;&#x5E38;&#x7528;&#x64CD;&#x4F5C;"></a>

| 方法                                    | 介绍           |
| :-------------------------------------- | :------------- |
| len\(str\)                              | 求长度         |
| +或 fmt.Sprintf                         | 拼接字符串     |
| strings.Split                           | 分割           |
| strings.Contains                        | 判断是否包含   |
| strings.HasPrefix,strings.HasSuffix     | 前缀/后缀判断  |
| strings.Index\(\),strings.LastIndex\(\) | 子串出现的位置 |
| strings.Join\(a\[\]string, sep string\) | join 操作      |

#### 1.1.9. byte 和 rune 类型 <a id="byte&#x548C;rune&#x7C7B;&#x578B;"></a>

组成每个字符串的元素叫做“字符”，可以通过遍历或者单个获取字符串元素获得字符。 字符用单引号（’）包裹起来，如：

```text
    var a := '中'

    var b := 'x'
```

Go 语言的字符有以下两种：

```text
    uint8类型，或者叫 byte 型，代表了ASCII码的一个字符。

    rune类型，代表一个 UTF-8字符。
```

当需要处理中文、日文或者其他复合字符时，则需要用到`rune`类型。`rune`类型实际是一个`int32`。 Go 使用了特殊的 `rune` 类型来处理 `Unicode`，让基于 `Unicode`的文本处理更为方便，也可以使用 `byte` 型进行默认字符串处理，性能和扩展性都有照顾

```text
    // 遍历字符串
    func traversalString() {
        s := "pprof.cn博客"
        for i := 0; i < len(s); i++ { //byte
            fmt.Printf("%v(%c) ", s[i], s[i])
        }
        fmt.Println()
        for _, r := range s { //rune
            fmt.Printf("%v(%c) ", r, r)
        }
        fmt.Println()
    }
```

输出：

```text
    112(p) 112(p) 114(r) 111(o) 102(f) 46(.) 99(c) 110(n) 229(å) 141() 154() 229(å) 174(®) 162(¢)
    112(p) 112(p) 114(r) 111(o) 102(f) 46(.) 99(c) 110(n) 21338(博) 23458(客)
```

因为 UTF8 编码下一个中文汉字由`3~4`个字节组成，所以我们不能简单的按照字节去遍历一个包含中文的字符串，否则就会出现上面输出中第一行的结果。

字符串底层是一个 byte 数组，所以可以和\[\]byte 类型相互转换。字符串是不能修改的 字符串是由 byte 字节组成，所以字符串的长度是 byte 字节的长度。 rune 类型用来表示 utf8 字符，一个 rune 字符由一个或多个 byte 组成。

#### 1.1.10. 修改字符串 <a id="&#x4FEE;&#x6539;&#x5B57;&#x7B26;&#x4E32;"></a>

要修改字符串，需要先将其转换成`[]rune或[]byte`，完成后再转换为`string`。无论哪种转换，都会重新分配内存，并复制字节数组。

```text
    func changeString() {
        s1 := "hello"
        // 强制类型转换
        byteS1 := []byte(s1)
        byteS1[0] = 'H'
        fmt.Println(string(byteS1))

        s2 := "博客"
        runeS2 := []rune(s2)
        runeS2[0] = '狗'
        fmt.Println(string(runeS2))
    }
```

#### 1.1.11. 类型转换 <a id="&#x7C7B;&#x578B;&#x8F6C;&#x6362;"></a>

Go 语言中只有强制类型转换，没有隐式类型转换。该语法只能在两个类型之间支持相互转换的时候使用。

强制类型转换的基本语法如下：

```text
    T(表达式)
```

其中，T 表示要转换的类型。表达式包括变量、复杂算子和函数返回值等.

比如计算直角三角形的斜边长时使用 math 包的 Sqrt\(\)函数，该函数接收的是 float64 类型的参数，而变量 a 和 b 都是 int 类型的，这个时候就需要将 a 和 b 强制类型转换为 float64 类型。

```text
    func sqrtDemo() {
        var a, b = 3, 4
        var c int
        // math.Sqrt()接收的参数是float64类型，需要强制转换
        c = int(math.Sqrt(float64(a*a + b*b)))
        fmt.Println(c)
    }
```

## 2. 类型的初始值

- 数值类型：初始化为 0
- 布尔类型 bool:初始化为 false
- 字符串类型:初始化为""
- 指针:初始化为 nil
